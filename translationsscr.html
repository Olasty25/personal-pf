<!-- Dodaj ten skrypt na końcu strony, tuż przed zamykającym tagiem </body> -->
<script>
// Skrypt do przełączania języków
document.addEventListener('DOMContentLoaded', function() {
    console.log('Script loaded');
    
    // Pobieramy przyciski
    const enButton = document.getElementById('lang-en');
    const plButton = document.getElementById('lang-pl');
    
    if (!enButton || !plButton) {
        console.error('Language buttons not found!');
        return;
    }
    
    console.log('Buttons found, adding event listeners');
    
    // Default language
    let currentLang = localStorage.getItem('preferredLanguage') || 'en';
    
    // Set initial language
    setLanguage(currentLang);
    
    // Explicit onclick handlers (bardziej niezawodne niż addEventListener w niektórych przypadkach)
    enButton.onclick = function() {
        console.log('English button clicked');
        setLanguage('en');
    };
    
    plButton.onclick = function() {
        console.log('Polish button clicked');
        setLanguage('pl');
    };
    
    function setLanguage(lang) {
        console.log('Setting language to: ' + lang);
        currentLang = lang;
        
        // Save preference
        localStorage.setItem('preferredLanguage', lang);
        
        // Update active button
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        const activeButton = document.getElementById('lang-' + lang);
        if (activeButton) {
            activeButton.classList.add('active');
        }
        
        // Update all text elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[key] && translations[key][lang]) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    if (element.getAttribute('placeholder')) {
                        element.setAttribute('placeholder', translations[key][lang]);
                    } else {
                        element.value = translations[key][lang];
                    }
                } else {
                    element.innerHTML = translations[key][lang];
                }
            } else {
                console.warn('Missing translation for key: ' + key + ' in language: ' + lang);
            }
        });
        
        // Update document lang attribute
        document.documentElement.lang = lang;
    }
});
</script>
